/* AGGRESSIVE CODE BLOCK STYLING - OVERRIDE EVERYTHING */

/* Target all possible code block selectors */
pre,
pre[class],
pre[class*="language"],
pre[class*="astro"],
.astro-code,
.shiki,
div[class*="language"] pre,
div[class*="astro"] pre,
article pre,
main pre,
.blog-content pre,
[data-astro-source-file] pre {
  background: var(--ctp-surface0) !important;
  background-color: var(--ctp-surface0) !important;
  border: 3px solid var(--ctp-surface1) !important;
  border-radius: 1rem !important;
  padding: 2rem !important;
  margin: 2.5rem 0 !important;
  box-shadow: 
    0 8px 25px -5px rgba(0, 0, 0, 0.4), 
    0 10px 10px -5px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
  font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace !important;
  font-size: 0.95rem !important;
  line-height: 1.6 !important;
  position: relative !important;
  
  /* ADAPTIVE WIDTH - GROWS WITH CONTENT UP TO LIMITS */
  width: 100% !important;
  min-width: 100% !important;
  max-width: 100vw !important;
  
  /* Content-based sizing with limits */
  width: fit-content !important;
  min-width: 100% !important;
  max-width: min(100vw - 2rem, 1200px) !important;
  
  /* Responsive max-width limits */
  @media (min-width: 640px) {
    max-width: min(100vw - 4rem, 1400px) !important;
  }
  
  @media (min-width: 768px) {
    max-width: min(100vw - 6rem, 1600px) !important;
  }
  
  @media (min-width: 1024px) {
    max-width: min(100vw - 8rem, 1800px) !important;
  }
  
  @media (min-width: 1280px) {
    max-width: min(100vw - 10rem, 2000px) !important;
  }
  
  /* Centering and overflow handling */
  margin-left: auto !important;
  margin-right: auto !important;
  overflow-x: auto !important;
  overflow-y: hidden !important;
  
  /* Text formatting */
  white-space: pre !important;
  word-wrap: normal !important;
  overflow-wrap: normal !important;
  
  /* Scrollbar styling */
  scrollbar-width: thin !important;
  scrollbar-color: var(--ctp-surface2) var(--ctp-surface0) !important;
}

/* Webkit scrollbar styling for code blocks */
pre::-webkit-scrollbar,
.astro-code::-webkit-scrollbar {
  height: 8px !important;
}

pre::-webkit-scrollbar-track,
.astro-code::-webkit-scrollbar-track {
  background: var(--ctp-surface0) !important;
  border-radius: 0 0 1rem 1rem !important;
}

pre::-webkit-scrollbar-thumb,
.astro-code::-webkit-scrollbar-thumb {
  background: var(--ctp-surface2) !important;
  border-radius: 4px !important;
}

pre::-webkit-scrollbar-thumb:hover,
.astro-code::-webkit-scrollbar-thumb:hover {
  background: var(--ctp-overlay0) !important;
}

/* Code inside pre blocks */
pre code,
pre[class] code,
pre[class*="language"] code,
pre[class*="astro"] code,
.astro-code code,
.shiki code,
div[class*="language"] pre code,
div[class*="astro"] pre code,
article pre code,
main pre code,
.blog-content pre code,
[data-astro-source-file] pre code {
  background: transparent !important;
  background-color: transparent !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  color: var(--ctp-text) !important;
  font-family: inherit !important;
  font-size: inherit !important;
  line-height: inherit !important;
  white-space: pre !important;
  word-wrap: normal !important;
  overflow-wrap: normal !important;
}

/* Inline code - NOT inside pre */
:not(pre) > code,
p code,
li code,
h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code,
td code,
th code,
blockquote code {
  background: var(--ctp-surface1) !important;
  background-color: var(--ctp-surface1) !important;
  color: var(--ctp-peach) !important;
  padding: 0.375rem 0.75rem !important;
  border-radius: 0.5rem !important;
  border: 2px solid var(--ctp-surface2) !important;
  font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace !important;
  font-weight: 600 !important;
  font-size: 0.9em !important;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15) !important;
  white-space: nowrap !important;
}

/* Override any framework styles */
.prose pre,
.prose-lg pre,
.prose-xl pre,
.markdown-content pre,
.content pre {
  background: var(--ctp-surface0) !important;
  border: 3px solid var(--ctp-surface1) !important;
  border-radius: 1rem !important;
  padding: 2rem !important;
}

.prose pre code,
.prose-lg pre code,
.prose-xl pre code,
.markdown-content pre code,
.content pre code {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
}

/* Force paragraph spacing */
.blog-content p,
article p,
main p {
  margin-bottom: 1.75rem !important;
  line-height: 1.8 !important;
}

/* Force heading spacing */
.blog-content h2,
article h2,
main h2 {
  margin-top: 3rem !important;
  margin-bottom: 1.5rem !important;
  padding-bottom: 1rem !important;
  border-bottom: 3px solid var(--ctp-surface1) !important;
}

.blog-content h3,
article h3,
main h3 {
  margin-top: 2.5rem !important;
  margin-bottom: 1.25rem !important;
}
